(this.webpackJsonpreact_template_repo=this.webpackJsonpreact_template_repo||[]).push([[0],{296:function(e,t,a){e.exports=a(603)},301:function(e,t,a){},302:function(e,t,a){},546:function(e,t,a){},597:function(e,t){},603:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(6),c=a.n(l);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o=a(76),u=(a(301),a(66)),i=a(15),s=a(196),m=(a(302),a(95)),d=a(44);var p=function(){return r.a.createElement("div",null,r.a.createElement("div",{id:"home-hero"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",{style:{color:"white",fontSize:50}},"Textbook Exchange"),r.a.createElement("h1",{style:{color:"white",fontSize:30}},"We are here to help you save money",r.a.createElement("br",null),"We can help make your college study easy and convenient"))),r.a.createElement("div",{className:"container"},r.a.createElement("h2",{style:{fontSize:50,textAlign:"center",paddingTop:"100px"}},"What can you do with Textbook Exchange?",r.a.createElement("br",null)),r.a.createElement("h2",{style:{fontSize:"1.75rem",textAlign:"center"}},"It's so simple!"),r.a.createElement("hr",null),r.a.createElement("div",{style:{textAlign:"center",padding:"50px"}},r.a.createElement(m.a,{gutter:{xs:8,sm:16,md:24,lg:32}},r.a.createElement(d.a,{className:"gutter-row",span:12},r.a.createElement("div",null,r.a.createElement(i.a,{type:"search",style:{fontSize:"4em"}}),r.a.createElement("h3",{style:{fontSize:"30px"}},"Search textbooks"),r.a.createElement("p",{style:{fontSize:"18px",marginBottom:"30px",color:"grey"}},"Use filters to search for any textbooks you look for"),r.a.createElement("hr",null),r.a.createElement("br",null))),r.a.createElement(d.a,{className:"gutter-row",span:12},r.a.createElement("div",null,r.a.createElement(i.a,{type:"read",style:{fontSize:"4em"}}),r.a.createElement("h3",{style:{fontSize:"30px"}},"Browse contents"),r.a.createElement("p",{style:{fontSize:"18px",marginBottom:"30px",color:"grey"}},"See all on-sale textbooks' information"),r.a.createElement("hr",null),r.a.createElement("br",null))),r.a.createElement(d.a,{className:"gutter-row",span:12},r.a.createElement("div",null,r.a.createElement(i.a,{type:"dollar",style:{fontSize:"4em"}}),r.a.createElement("h3",{style:{fontSize:"30px"}},"Purchase cheap textbooks"),r.a.createElement("p",{style:{fontSize:"18px",marginBottom:"30px",color:"grey"}},"Purchase textbooks you need in a low price"),r.a.createElement("hr",null),r.a.createElement("br",null))),r.a.createElement(d.a,{className:"gutter-row",span:12},r.a.createElement("div",null,r.a.createElement(i.a,{type:"save",style:{fontSize:"4em"}}),r.a.createElement("h3",{style:{fontSize:"30px"}},"Collect favorites"),r.a.createElement("p",{style:{fontSize:"18px",marginBottom:"30px",color:"grey"}},"Save your desired textbooks to your favorite list for future"),r.a.createElement("hr",null),r.a.createElement("br",null))),r.a.createElement(d.a,{className:"gutter-row",span:12},r.a.createElement("div",null,r.a.createElement(i.a,{type:"safety",style:{fontSize:"4em"}}),r.a.createElement("h3",{style:{fontSize:"30px"}},"Secure information"),r.a.createElement("p",{style:{fontSize:"18px",marginBottom:"30px",color:"grey"}},"Secure information, personal privacy and user authentication"),r.a.createElement("hr",null),r.a.createElement("br",null))),r.a.createElement(d.a,{className:"gutter-row",span:12},r.a.createElement("div",null,r.a.createElement(i.a,{type:"shop",style:{fontSize:"4em"}}),r.a.createElement("h3",{style:{fontSize:"30px"}},"Post and sell"),r.a.createElement("p",{style:{fontSize:"18px",marginBottom:"30px",color:"grey"}},"Upload and sell your own used textbooks to help other students"),r.a.createElement("hr",null),r.a.createElement("br",null)))))),r.a.createElement("div",{id:"home-hero1"},r.a.createElement("div",{className:"container"},r.a.createElement("h2",{className:"intro"},"Stop wasting money",r.a.createElement("br",null),"Start exchanging old textbooks",r.a.createElement("br",null),r.a.createElement("a",{href:"/textbook"},r.a.createElement(s.a,{className:"start",type:"default",size:"large",icon:"right"},"Let's get started"))))))},E=function(){return r.a.createElement("div",{className:"jumbotron jumbotron-fluid"},r.a.createElement("div",{className:"container",style:{textAlign:"center"}},r.a.createElement("h1",{className:"display-3"},r.a.createElement(i.a,{type:"meh"}),"404 Page Not Found"),r.a.createElement("p",{className:"lead"},"We couldn't find the page you requested. Try access other content.")))},f=a(3),h=a(8),b=a.n(h);function y(){return{type:"auth_user",payload:b.a.get("/api/users".concat("/auth")).then((function(e){return e.data}))}}var g=a(146),v=a(43),k=a(610),j=a(609),O=a(613),x=a(20),S=k.a.Title;var C=Object(u.g)((function(e){var t=Object(x.c)(),a=!!localStorage.getItem("rememberMe"),l=Object(n.useState)(""),c=Object(f.a)(l,2),o=c[0],u=c[1],m=Object(n.useState)(a),d=Object(f.a)(m,2),p=d[0],E=(d[1],localStorage.getItem("rememberMe")?localStorage.getItem("rememberMe"):"");return r.a.createElement(g.a,{initialValues:{email:E,password:""},validationSchema:v.object().shape({email:v.string().email("Email is invalid").required("Email is required"),password:v.string().min(6,"Password must be at least 6 characters").required("Password is required")}),onSubmit:function(a,n){var r=n.setSubmitting;setTimeout((function(){var n={email:a.email,password:a.password};t(function(e){return{type:"login_user",payload:b.a.post("/api/users".concat("/login"),e).then((function(e){return e.data}))}}(n)).then((function(t){t.payload.loginSuccess?(window.localStorage.setItem("userId",t.payload.userId),!0===p?window.localStorage.setItem("rememberMe",a.id):localStorage.removeItem("rememberMe"),e.history.push("/")):u("Check out your Account or Password again")})).catch((function(e){u("Check out your Account or Password again"),setTimeout((function(){u("")}),3e3)})),r(!1)}),500)}},(function(e){var t=e.values,a=e.touched,n=e.errors,l=(e.dirty,e.isSubmitting),c=e.handleChange,u=e.handleBlur,m=e.handleSubmit;e.handleReset;return r.a.createElement("div",{className:"app"},r.a.createElement(S,{level:2},"Sign In"),r.a.createElement("form",{onSubmit:m,style:{width:"350px"}},r.a.createElement(j.a.Item,{required:!0},r.a.createElement(O.a,{id:"email",prefix:r.a.createElement(i.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Enter your email",type:"email",onChange:c,onBlur:u,className:n.email&&a.email?"text-input error":"text-input"}),n.email&&a.email&&r.a.createElement("div",{className:"input-feedback"},n.email)),r.a.createElement(j.a.Item,{required:!0},r.a.createElement(O.a,{id:"password",prefix:r.a.createElement(i.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Enter your password",type:"password",value:t.password,onChange:c,onBlur:u,className:n.password&&a.password?"text-input error":"text-input"}),n.password&&a.password&&r.a.createElement("div",{className:"input-feedback"},n.password)),o&&r.a.createElement("label",null,r.a.createElement("p",{style:{color:"#ff0000bf",fontSize:"0.7rem",border:"1px solid",padding:"1rem",borderRadius:"10px"}},o)),r.a.createElement(j.a.Item,null,r.a.createElement("div",null,r.a.createElement(s.a,{type:"primary",htmlType:"submit",className:"login-form-button",style:{minWidth:"100%"},disabled:l,onSubmit:m},"Log in")),"Or ",r.a.createElement("a",{href:"/register"},"register now!"))))}))})),w=a(49),_=a.n(w),D=k.a.Title,I={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},T={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}};var P=function(e){var t=Object(x.c)();return r.a.createElement(g.a,{initialValues:{email:"",fullname:"",password:"",confirmPassword:""},validationSchema:v.object().shape({fullname:v.string().required("Name is required"),email:v.string().email("Email is invalid").required("Email is required"),password:v.string().min(6,"Password must be at least 6 characters").required("Password is required"),confirmPassword:v.string().oneOf([v.ref("password"),null],"Passwords must match").required("Confirm Password is required")}),onSubmit:function(a,n){var r=n.setSubmitting;setTimeout((function(){var n={email:a.email,password:a.password,fullname:a.fullname,image:"http://gravatar.com/avatar/".concat(_()().unix(),"?d=identicon")};t(function(e){return{type:"register_user",payload:b.a.post("/api/users".concat("/register"),e).then((function(e){return e.data}))}}(n)).then((function(t){t.payload.success?e.history.push("/login"):alert(t.payload.err.errmsg)})),r(!1)}),500)}},(function(e){var t=e.values,a=e.touched,n=e.errors,l=(e.dirty,e.isSubmitting),c=e.handleChange,o=e.handleBlur,u=e.handleSubmit;e.handleReset;return r.a.createElement("div",{className:"app"},r.a.createElement(D,{level:2},"Sign Up"),r.a.createElement(j.a,Object.assign({style:{minWidth:"375px"}},I,{onSubmit:u}),r.a.createElement(j.a.Item,{required:!0,label:"Full Name"},r.a.createElement(O.a,{id:"fullname",placeholder:"Enter your full name",type:"text",value:t.fullname,onChange:c,onBlur:o,className:n.fullname&&a.fullname?"text-input error":"text-input"}),n.fullname&&a.fullname&&r.a.createElement("div",{className:"input-feedback"},n.fullname)),r.a.createElement(j.a.Item,{required:!0,label:"Email",hasFeedback:!0,validateStatus:n.email&&a.email?"error":"success"},r.a.createElement(O.a,{id:"email",placeholder:"Enter your Email",type:"email",value:t.email,onChange:c,onBlur:o,className:n.email&&a.email?"text-input error":"text-input"}),n.email&&a.email&&r.a.createElement("div",{className:"input-feedback"},n.email)),r.a.createElement(j.a.Item,{required:!0,label:"Password",hasFeedback:!0,validateStatus:n.password&&a.password?"error":"success"},r.a.createElement(O.a,{id:"password",placeholder:"Enter your password",type:"password",value:t.password,onChange:c,onBlur:o,className:n.password&&a.password?"text-input error":"text-input"}),n.password&&a.password&&r.a.createElement("div",{className:"input-feedback"},n.password)),r.a.createElement(j.a.Item,{required:!0,label:"Confirm",hasFeedback:!0},r.a.createElement(O.a,{id:"confirmPassword",placeholder:"Confirm your Password",type:"password",value:t.confirmPassword,onChange:c,onBlur:o,className:n.confirmPassword&&a.confirmPassword?"text-input error":"text-input"}),n.confirmPassword&&a.confirmPassword&&r.a.createElement("div",{className:"input-feedback"},n.confirmPassword)),r.a.createElement(j.a.Item,T,r.a.createElement(s.a,{onClick:u,type:"primary",disabled:l},"Submit"))))}))},N=a(612);var F=function(e){return r.a.createElement(N.a,{mode:e.mode},r.a.createElement(N.a.Item,{key:"books"},r.a.createElement("a",{href:"/textbook",style:{fontSize:20}},"TextBooks")))},A=a(80),z=a(616);var M=Object(u.g)((function(e){var t=Object(x.d)((function(e){return e.user}));return t.userData&&!t.userData.isAuth?r.a.createElement(N.a,{mode:e.mode},r.a.createElement(N.a.Item,{key:"mail"},r.a.createElement("a",{href:"/login",style:{fontSize:20}},"Signin")),r.a.createElement(N.a.Item,{key:"app"},r.a.createElement("a",{href:"/register",style:{fontSize:20}},"Signup"))):r.a.createElement(N.a,{mode:e.mode},r.a.createElement(N.a.Item,{key:"profile"},r.a.createElement(A.a,{placement:"bottom",title:"user profile"},r.a.createElement("a",{href:"/profile"},r.a.createElement(i.a,{type:"user",style:{fontSize:25}})))),r.a.createElement(N.a.Item,{key:"upload"},r.a.createElement(A.a,{placement:"bottom",title:"post and sell"},r.a.createElement("a",{href:"/product/upload"},r.a.createElement(i.a,{type:"upload",style:{fontSize:25}})))),r.a.createElement(N.a.Item,{key:"wishlist",style:{paddingBottom:8}},r.a.createElement(z.a,{dot:t.userData&&t.userData.favorite.length},r.a.createElement(A.a,{placement:"bottom",title:"wish list"},r.a.createElement("a",{href:"/favorite"},r.a.createElement(i.a,{type:"heart",style:{fontSize:25}}))))),r.a.createElement(N.a.Item,{key:"cart",style:{paddingBottom:8}},r.a.createElement(z.a,{count:t.userData&&t.userData.cart.length},r.a.createElement(A.a,{placement:"bottom",title:"personal cart"},r.a.createElement("a",{href:"/user/cart"},r.a.createElement(i.a,{type:"shopping-cart",style:{fontSize:25}}))))),r.a.createElement(N.a.Item,{key:"logout"},r.a.createElement(A.a,{placement:"bottom",title:"sign out"},r.a.createElement("a",{onClick:function(){b.a.get("/api/users".concat("/logout")).then((function(t){200===t.status?e.history.push("/login"):alert("Log Out Failed")}))}},r.a.createElement(i.a,{type:"logout",style:{fontSize:25}})))))}));a(546);var B=function(){return r.a.createElement("nav",{className:"menu",style:{position:"fixed",zIndex:5,width:"100%"}},r.a.createElement("div",{className:"menu__logo"},r.a.createElement("a",{href:"/"},r.a.createElement("img",{className:"logo",src:"/logo.png",style:{width:"100%",height:"100%"},alt:"App logo"}))),r.a.createElement("div",{className:"menu__container"},r.a.createElement("div",{className:"menu_left"},r.a.createElement(F,{mode:"horizontal"})),r.a.createElement("div",{className:"menu_rigth"},r.a.createElement(M,{mode:"horizontal"}))))},L=a(195),q=a.n(L),U=a(286),W=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;function l(l){var c=Object(x.d)((function(e){return e.user})),o=Object(x.c)();return Object(n.useEffect)((function(){o(y()).then(function(){var e=Object(U.a)(q.a.mark((function e(n){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,!n.payload.isAuth;case 2:if(!e.sent){e.next=6;break}t&&l.history.push("/login"),e.next=7;break;case 6:a&&!n.payload.isAdmin?l.history.push("/"):!1===t&&l.history.push("/");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[o,l.history,c.googleAuth]),r.a.createElement(e,Object.assign({},l,{user:c}))}return l};var H=function(){return r.a.createElement("div",{style:{height:"80px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontSize:"1rem"}},r.a.createElement("p",null," Happy Study, Happy Textbooks Exchange  ",r.a.createElement(i.a,{type:"smile"})),r.a.createElement("p",null,"Have question? email us at help@TBooks.com"))},$=a(22),V=a(56),R=a(608),G=a(604);var Y=function(e){return r.a.createElement("div",null,r.a.createElement(G.a,{autoplay:!0},e.images.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("img",{style:{width:"100%",maxHeight:"150px"},src:"http://localhost:5000/".concat(e),alt:"productImage"}))}))))},K=a(617);var X=function(e){var t=Object(n.useState)([]),a=Object(f.a)(t,2),l=a[0],c=a[1];return r.a.createElement("div",null,e.list&&e.list.map((function(t,a){return r.a.createElement(r.a.Fragment,{key:a},r.a.createElement(K.a,{onChange:function(){return function(t){var a=l.indexOf(t),n=Object(V.a)(l);-1===a?n.push(t):n.splice(a,1),c(n),e.handleFilters(n)}(t._id)},type:"checkbox",checked:-1!==l.indexOf(t._id)}),"\xa0\xa0",r.a.createElement("span",null,t.name),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0")})))},J=a(614);var Q=function(e){var t=Object(n.useState)("0"),a=Object(f.a)(t,2),l=a[0],c=a[1];return r.a.createElement("div",null,r.a.createElement(J.a.Group,{onChange:function(t){c(t.target.value),e.handleFilters(t.target.value)},value:l},e.list&&e.list.map((function(e){return r.a.createElement(J.a,{key:e._id,value:"".concat(e._id)},e.name)}))))},Z=[{_id:0,name:"Any",array:[]},{_id:1,name:"$0 to $199",array:[0,199]},{_id:2,name:"$200 to $249",array:[200,249]},{_id:3,name:"$250 to $279",array:[250,279]},{_id:4,name:"$280 to $299",array:[280,299]},{_id:5,name:"More than $300",array:[300,15e5]}],ee=[{_id:1,name:"Brand new"},{_id:2,name:"New"},{_id:3,name:"Used"},{_id:4,name:"Good"},{_id:5,name:"Old"}],te=[{_id:1,name:"Undergraduate"},{_id:2,name:"Graduate"},{_id:3,name:"PHD"}],ae=[{_id:1,name:"Herbert Wertheim College of Engineering"},{_id:2,name:"College of the Arts"},{_id:3,name:"Warrington College of Business"},{_id:4,name:"College of Education"},{_id:5,name:"College of Medicine"},{_id:6,name:"Levin College of Law"},{_id:7,name:"Fisher School of Accounting"}],ne=[{_id:1,name:"Finance"},{_id:2,name:"Physics"},{_id:3,name:"Math"},{_id:4,name:"Arts"},{_id:5,name:"Music"}],re=O.a.Search;var le=function(e){var t=Object(n.useState)(""),a=Object(f.a)(t,2),l=a[0],c=a[1];return r.a.createElement("div",null,r.a.createElement(re,{value:l,onChange:function(t){c(t.currentTarget.value),e.refreshFunction(t.currentTarget.value)},placeholder:"Search By Typing..."}))},ce=a(611),oe=ce.a.Panel,ue=R.a.Meta;var ie=function(){var e=Object(n.useState)([]),t=Object(f.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(0),o=Object(f.a)(c,2),u=o[0],s=o[1],p=Object(n.useState)(8),E=Object(f.a)(p,2),h=E[0],y=(E[1],Object(n.useState)()),g=Object(f.a)(y,2),v=g[0],k=g[1],j=Object(n.useState)(""),O=Object(f.a)(j,2),x=(O[0],O[1]),S=Object(n.useState)({condition:[],price:[],level:[],category:[],department:[]}),C=Object(f.a)(S,2),w=C[0],_=C[1];Object(n.useEffect)((function(){D({skip:u,limit:h})}),[]);var D=function(e){b.a.post("/api/product/getProducts",e).then((function(t){t.data.success?(e.loadMore?l([].concat(Object(V.a)(a),Object(V.a)(t.data.products))):l(t.data.products),k(t.data.postSize)):alert("Failed to fectch product datas")}))},I=a.map((function(e,t){return r.a.createElement(d.a,{lg:6,md:8,xs:24},r.a.createElement(R.a,{hoverable:!0,cover:r.a.createElement("a",{href:"/product/".concat(e._id)}," ",r.a.createElement(Y,{images:e.images}))},r.a.createElement(ue,{title:e.title,description:"$".concat(e.price)})))})),T=function(e,t){var a=Object($.a)({},w);if(a[t]=e,"price"===t){var n=function(e){var t=Z,a=[];for(var n in t)t[n]._id===parseInt(e,10)&&(a=t[n].array);return console.log("array",a),a}(e);a[t]=n}console.log(a),function(e){D({skip:0,limit:h,filters:e}),s(0)}(a),_(a)};return r.a.createElement("div",{style:{width:"75%",margin:"3rem auto"}},r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("h2",null,"  Let's Make Use of Used Textbooks  ",r.a.createElement(i.a,{type:"rocket"}),"  ")),r.a.createElement(ce.a,{defaultActiveKey:["0"]},r.a.createElement(oe,{header:"Filters",key:"1"},r.a.createElement(m.a,{gutter:[8,8]},r.a.createElement(d.a,{lg:12,xs:12},r.a.createElement("label",null,r.a.createElement("strong",null,r.a.createElement(i.a,{type:"filter"}),"Condition:")),r.a.createElement(X,{list:ee,handleFilters:function(e){return T(e,"condition")}})),r.a.createElement(d.a,{lg:12,xs:12},r.a.createElement("label",null,r.a.createElement("strong",null,r.a.createElement(i.a,{type:"filter"}),"Category:")),r.a.createElement(X,{list:ne,handleFilters:function(e){return T(e,"category")}})),r.a.createElement(d.a,{lg:12,xs:12},r.a.createElement("label",null,r.a.createElement("strong",null,r.a.createElement(i.a,{type:"filter"}),"Department:")),r.a.createElement(X,{list:ae,handleFilters:function(e){return T(e,"department")}})),r.a.createElement(d.a,{lg:12,xs:12},r.a.createElement("label",null,r.a.createElement("strong",null,r.a.createElement(i.a,{type:"filter"}),"Price:")),r.a.createElement(Q,{list:Z,handleFilters:function(e){return T(e,"price")}})),r.a.createElement(d.a,{lg:12,xs:12},r.a.createElement("label",null,r.a.createElement("strong",null,r.a.createElement(i.a,{type:"filter"}),"Program Level:")),r.a.createElement(X,{list:te,handleFilters:function(e){return T(e,"level")}}))))),r.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",margin:"1rem auto"}},r.a.createElement(le,{refreshFunction:function(e){var t={skip:0,limit:h,filters:w,searchTerm:e};s(0),x(e),D(t)}})),0===a.length?r.a.createElement("div",{style:{display:"flex",height:"300px",justifyContent:"center",alignItems:"center"}},r.a.createElement("h2",null,"No post yet...")):r.a.createElement("div",null,r.a.createElement(m.a,{gutter:[16,16]},I)),r.a.createElement("br",null),r.a.createElement("br",null),v>=h&&r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement("button",{onClick:function(){var e=u+h;D({skip:e,limit:h,loadMore:!0}),s(e)}},"Load More")))},se=a(293);var me=function(e){var t=Object(n.useState)([]),a=Object(f.a)(t,2),l=a[0],c=a[1];return r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement(se.a,{onDrop:function(t){var a=new FormData;a.append("file",t[0]),b.a.post("/api/product/uploadImage",a,{header:{"content-type":"multipart/form-data"}}).then((function(t){t.data.success?(c([].concat(Object(V.a)(l),[t.data.image])),e.refreshFunction([].concat(Object(V.a)(l),[t.data.image]))):alert("Failed to save the Image in Server")}))},multiple:!1,maxSize:8e8},(function(e){var t=e.getRootProps,a=e.getInputProps;return r.a.createElement("div",Object.assign({style:{width:"300px",height:"240px",border:"1px solid lightgray",display:"flex",alignItems:"center",justifyContent:"center"}},t()),r.a.createElement("input",a()),r.a.createElement(i.a,{type:"plus",style:{fontSize:"3rem"}}))})),r.a.createElement("div",{style:{display:"flex",width:"350px",height:"240px",overflowX:"scroll"}},l.map((function(t,a){return r.a.createElement("div",{onClick:function(){return function(t){var a=l.indexOf(t),n=Object(V.a)(l);n.splice(a,1),c(n),e.refreshFunction(n)}(t)}},r.a.createElement("img",{style:{minWidth:"300px",width:"300px",height:"240px"},src:"http://localhost:5000/".concat(t),alt:"productImg-".concat(a)}))}))))},de=k.a.Title,pe=O.a.TextArea,Ee=[{key:1,value:"Brand new"},{key:2,value:"New"},{key:3,value:"Used"},{key:4,value:"Good"},{key:5,value:"Old"}],fe=[{key:1,value:"Undergraduate"},{key:2,value:"Graduate"},{key:3,value:"PHD"}],he=[{key:1,value:"Herbert Wertheim College of Engineering"},{key:2,value:"College of the Arts"},{key:3,value:"Warrington College of Business"},{key:4,value:"College of Education"},{key:5,value:"College of Medicine"},{key:6,value:"Levin College of Law"},{key:7,value:"Fisher School of Accounting"}],be=[{key:1,value:"Finance"},{key:2,value:"Physics"},{key:3,value:"Math"},{key:4,value:"Arts"},{key:5,value:"Music"}];var ye=function(e){var t=Object(n.useState)(""),a=Object(f.a)(t,2),l=a[0],c=a[1],o=Object(n.useState)(""),u=Object(f.a)(o,2),m=u[0],d=u[1],p=Object(n.useState)(""),E=Object(f.a)(p,2),h=E[0],y=E[1],g=Object(n.useState)(""),v=Object(f.a)(g,2),k=v[0],x=v[1],S=Object(n.useState)(""),C=Object(f.a)(S,2),w=C[0],_=C[1],D=Object(n.useState)(""),I=Object(f.a)(D,2),T=I[0],P=I[1],N=Object(n.useState)(0),F=Object(f.a)(N,2),A=F[0],z=F[1],M=Object(n.useState)(0),B=Object(f.a)(M,2),L=B[0],q=B[1],U=Object(n.useState)(1),W=Object(f.a)(U,2),H=W[0],$=W[1],V=Object(n.useState)(1),R=Object(f.a)(V,2),G=R[0],Y=R[1],K=Object(n.useState)(1),X=Object(f.a)(K,2),J=X[0],Q=X[1],Z=Object(n.useState)(1),ee=Object(f.a)(Z,2),te=ee[0],ae=ee[1],ne=Object(n.useState)([]),re=Object(f.a)(ne,2),le=re[0],ce=re[1],oe=function(t){if(t.preventDefault(),!l||!m||!te||!J||!G||!h||!T||!k||!w||!A||!H||!L||!le)return alert("fill all the fields first!");if(!e.user.userData.phone||!e.user.userData.major||!e.user.userData.address||!e.user.userData.description)return alert("complete your profile before you can post!");var a={writer:e.user.userData._id,useremail:e.user.userData.email,username:e.user.userData.fullname,usermajor:e.user.userData.major,userphone:e.user.userData.phone,userbio:e.user.userData.description,useraddr:e.user.userData.address,title:l,author:h,code:w,professor:k,ISBN:T,description:m,price:A,version:L,images:le,condition:H,level:G,department:J,category:te};b.a.post("/api/product/uploadProduct",a).then((function(t){t.data.success?(ue(t.data.product),alert("Product Successfully Uploaded"),e.history.push("/textbook")):alert("Failed to upload Product")}))},ue=function(e){b.a.post("/api/users/successPost",e).then((function(e){e.data.success?alert("Product Successfully Uploaded"):alert("Failed to upload Product")}))};return r.a.createElement("div",{style:{maxWidth:"700px",margin:"2rem auto"}},r.a.createElement("div",{style:{textAlign:"center",marginBottom:"2rem"}},r.a.createElement(de,{level:2}," Upload My Textbooks ",r.a.createElement(i.a,{type:"book"}))),r.a.createElement(j.a,{onSubmit:oe},r.a.createElement("label",null,"Title"),r.a.createElement(O.a,{onChange:function(e){c(e.currentTarget.value)},value:l}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null,"Author"),r.a.createElement(O.a,{onChange:function(e){y(e.currentTarget.value)},value:h}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null,"Version"),r.a.createElement(O.a,{onChange:function(e){q(e.currentTarget.value)},value:L,type:"number"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null,"ISBN"),r.a.createElement(O.a,{onChange:function(e){P(e.currentTarget.value)},value:T}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null,"Condition: "),r.a.createElement("select",{onChange:function(e){$(e.currentTarget.value)}},Ee.map((function(e){return r.a.createElement("option",{key:e.key,value:e.key},e.value," ")}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null,"Course Code"),r.a.createElement(O.a,{onChange:function(e){_(e.currentTarget.value)},value:w}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null,"Professor"),r.a.createElement(O.a,{onChange:function(e){x(e.currentTarget.value)},value:k}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null,"Program Level: "),r.a.createElement("select",{onChange:function(e){Y(e.currentTarget.value)}},fe.map((function(e){return r.a.createElement("option",{key:e.key,value:e.key},e.value," ")}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null,"Department: "),r.a.createElement("select",{onChange:function(e){Q(e.currentTarget.value)}},he.map((function(e){return r.a.createElement("option",{key:e.key,value:e.key},e.value," ")}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null,"Category: "),r.a.createElement("select",{onChange:function(e){ae(e.currentTarget.value)}},be.map((function(e){return r.a.createElement("option",{key:e.key,value:e.key},e.value," ")}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null,"Description"),r.a.createElement(pe,{onChange:function(e){d(e.currentTarget.value)},value:m}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null,"Price($)"),r.a.createElement(O.a,{onChange:function(e){z(e.currentTarget.value)},value:A,type:"number"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null,"Upload images"),r.a.createElement(me,{refreshFunction:function(e){ce(e)}}),r.a.createElement("p",{style:{color:"red"}},"*drop or choose from files, left click image to delete on right area"),r.a.createElement(s.a,{onClick:oe,type:"dashed",size:"large"},"Post")))},ge=k.a.Title,ve=O.a.TextArea,ke=[{key:1,value:"Brand new"},{key:2,value:"New"},{key:3,value:"Used"},{key:4,value:"Good"},{key:5,value:"Old"}],je=[{key:1,value:"Undergraduate"},{key:2,value:"Graduate"},{key:3,value:"PHD"}],Oe=[{key:1,value:"Herbert Wertheim College of Engineering"},{key:2,value:"College of the Arts"},{key:3,value:"Warrington College of Business"},{key:4,value:"College of Education"},{key:5,value:"College of Medicine"},{key:6,value:"Levin College of Law"},{key:7,value:"Fisher School of Accounting"}],xe=[{key:1,value:"Finance"},{key:2,value:"Physics"},{key:3,value:"Math"},{key:4,value:"Arts"},{key:5,value:"Music"}];var Se=function(e){var t=e.match.params.productId,a=Object(n.useState)(""),l=Object(f.a)(a,2),c=l[0],o=l[1],u=Object(n.useState)(""),m=Object(f.a)(u,2),d=m[0],p=m[1],E=Object(n.useState)(""),h=Object(f.a)(E,2),y=h[0],g=h[1],v=Object(n.useState)(""),k=Object(f.a)(v,2),x=k[0],S=k[1],C=Object(n.useState)(""),w=Object(f.a)(C,2),_=w[0],D=w[1],I=Object(n.useState)(""),T=Object(f.a)(I,2),P=T[0],N=T[1],F=Object(n.useState)(0),A=Object(f.a)(F,2),z=A[0],M=A[1],B=Object(n.useState)(0),L=Object(f.a)(B,2),q=L[0],U=L[1],W=Object(n.useState)(1),H=Object(f.a)(W,2),$=H[0],V=H[1],R=Object(n.useState)(1),G=Object(f.a)(R,2),Y=G[0],K=G[1],X=Object(n.useState)(1),J=Object(f.a)(X,2),Q=J[0],Z=J[1],ee=Object(n.useState)(1),te=Object(f.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)([]),le=Object(f.a)(re,2),ce=le[0],oe=le[1];Object(n.useEffect)((function(){b.a.get("/api/product/products_by_id?id=".concat(t,"&type=single")).then((function(e){o(e.data[0].title),p(e.data[0].description),g(e.data[0].author),S(e.data[0].professor),D(e.data[0].code),N(e.data[0].ISBN),M(e.data[0].price),U(e.data[0].version),V(e.data[0].condition),K(e.data[0].level),Z(e.data[0].department),ne(e.data[0].category)}))}),[]);var ue=function(a){if(a.preventDefault(),!c||!d||!ae||!Q||!Y||!y||!P||!x||!_||!z||!$||!q||!ce)return alert("fill all the fields first!");var n={writer:e.user.userData._id,username:e.user.userData.fullname,usermajor:e.user.userData.major,userphone:e.user.userData.phone,userbio:e.user.userData.description,useraddr:e.user.userData.address,title:c,author:y,code:_,professor:x,ISBN:P,description:d,price:z,version:q,images:ce,condition:$,level:Y,department:Q,category:ae};b.a.put("/api/product/products_by_id?id=".concat(t),n).then((function(t){t.data.success?(alert("Product Successfully Updated"),e.history.push("/textbook")):alert("Failed to update Product")}))};return r.a.createElement("div",{style:{maxWidth:"700px",margin:"2rem auto"}},r.a.createElement("div",{style:{textAlign:"center",marginBottom:"2rem"}},r.a.createElement(ge,{level:2}," Edit My Textbooks ",r.a.createElement(i.a,{type:"book"}))),r.a.createElement(j.a,{onSubmit:ue},r.a.createElement("label",null,"Title"),r.a.createElement(O.a,{onChange:function(e){o(e.currentTarget.value)},value:c}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null,"Author"),r.a.createElement(O.a,{onChange:function(e){g(e.currentTarget.value)},value:y}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null,"Version"),r.a.createElement(O.a,{onChange:function(e){U(e.currentTarget.value)},value:q,type:"number"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null,"ISBN"),r.a.createElement(O.a,{onChange:function(e){N(e.currentTarget.value)},value:P}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null,"Condition: "),r.a.createElement("select",{onChange:function(e){V(e.currentTarget.value)},value:$},ke.map((function(e){return r.a.createElement("option",{key:e.key,value:e.key},e.value," ")}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null,"Course Code"),r.a.createElement(O.a,{onChange:function(e){D(e.currentTarget.value)},value:_}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null,"Professor"),r.a.createElement(O.a,{onChange:function(e){S(e.currentTarget.value)},value:x}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null,"Program Level: "),r.a.createElement("select",{onChange:function(e){K(e.currentTarget.value)},value:Y},je.map((function(e){return r.a.createElement("option",{key:e.key,value:e.key},e.value," ")}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null,"Department: "),r.a.createElement("select",{onChange:function(e){Z(e.currentTarget.value)},value:Q},Oe.map((function(e){return r.a.createElement("option",{key:e.key,value:e.key},e.value," ")}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null,"Category: "),r.a.createElement("select",{onChange:function(e){ne(e.currentTarget.value)},value:ae},xe.map((function(e){return r.a.createElement("option",{key:e.key,value:e.key},e.value," ")}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null,"Description"),r.a.createElement(ve,{onChange:function(e){p(e.currentTarget.value)},value:d}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null,"Price($)"),r.a.createElement(O.a,{onChange:function(e){M(e.currentTarget.value)},value:z,type:"number"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null,"Upload images"),r.a.createElement(me,{refreshFunction:function(e){oe(e)}}),r.a.createElement("p",{style:{color:"red"}},"*drop or choose from files, left click image to delete on right area"),r.a.createElement(s.a,{onClick:ue,type:"dashed",size:"large"},"Update Post")))},Ce=a(288),we=a.n(Ce);var _e=function(e){var t=Object(n.useState)([]),a=Object(f.a)(t,2),l=a[0],c=a[1];return Object(n.useEffect)((function(){if(e.detail.images&&e.detail.images.length>0){var t=[];e.detail.images&&e.detail.images.map((function(e){t.push({original:"http://localhost:5000/".concat(e),thumbnail:"http://localhost:5000/".concat(e)})})),c(t)}}),[e.detail]),r.a.createElement("div",null,r.a.createElement(we.a,{items:l}))},De=a(618),Ie=a(605);var Te=function(e){var t=Object(x.d)((function(e){return e.user})),a=Object(n.useState)({}),l=Object(f.a)(a,2),c=l[0],o=l[1];Object(n.useEffect)((function(){o(e.detail)}),[e.detail]);var u=r.a.createElement("div",null,r.a.createElement("label",null,r.a.createElement("strong",null,"Email:")),r.a.createElement("p",null,r.a.createElement(i.a,{type:"mail"})," ",c.useremail),r.a.createElement("label",null,r.a.createElement("strong",null,"Phone:")),r.a.createElement("p",null,r.a.createElement(i.a,{type:"phone"})," ",c.userphone),r.a.createElement("label",null,r.a.createElement("strong",null,"Major:")),r.a.createElement("p",null,r.a.createElement(i.a,{type:"laptop"})," ",c.usermajor),r.a.createElement("label",null,r.a.createElement("strong",null,"Address:")),r.a.createElement("p",null,r.a.createElement(i.a,{type:"home"})," ",c.useraddr),r.a.createElement("label",null,r.a.createElement("strong",null,"Bio:")),r.a.createElement("p",null,r.a.createElement(i.a,{type:"rest"})," ",c.userbio));return r.a.createElement("div",null,r.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},r.a.createElement(s.a,{size:"large",shape:"round",type:"danger",onClick:function(){if(t.userData&&!t.userData.isAuth)return alert("Please Log in first");e.addToFavorite(e.detail._id)}},r.a.createElement(i.a,{type:"heart"}))),r.a.createElement(De.a,{title:"Details:"},r.a.createElement(De.a.Item,{label:"Price"},"$",c.price),r.a.createElement(De.a.Item,{label:"Sold"},c.sold),r.a.createElement(De.a.Item,{label:"Author"}," ",c.author),r.a.createElement(De.a.Item,{label:"Version"}," ",c.version),r.a.createElement(De.a.Item,{label:"ISBN"}," ",c.ISBN),r.a.createElement(De.a.Item,{label:"Condition"}," ",function(e){switch(e){case 1:return"Brand new";case 2:return"New";case 3:return"Used";case 4:return"Good";case 5:return"Old"}}(c.condition)),r.a.createElement(De.a.Item,{label:"Course Code"}," ",c.code),r.a.createElement(De.a.Item,{label:"Professor"}," ",c.professor),r.a.createElement(De.a.Item,{label:"Program Level"}," ",function(e){switch(e){case 1:return"Undergraduate";case 2:return"Graduate";case 3:return"PHD"}}(c.level)),r.a.createElement(De.a.Item,{label:"Category"}," ",function(e){switch(e){case 1:return"Finance";case 2:return"Physics";case 3:return"Math";case 4:return"Arts";case 5:return"Music"}}(c.category)),r.a.createElement(De.a.Item,{label:"Department"}," ",function(e){switch(e){case 1:return"Herbert Wertheim College of Engineering";case 2:return"College of the Arts";case 3:return"Warrington College of Business";case 4:return"College of Education";case 5:return"College of Medicine";case 6:return"Levin College of Law";case 7:return"Fisher School of Accounting"}}(c.department))),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("label",{style:{fontSize:16}},r.a.createElement("strong",null,"Description:")),r.a.createElement("p",null,c.description)),r.a.createElement("div",null,r.a.createElement("label",{style:{fontSize:16}},r.a.createElement("strong",null,"Seller:")),r.a.createElement("p",null,r.a.createElement(i.a,{type:"user"})," ",c.username,"  \xa0\xa0\xa0\xa0 ",r.a.createElement("a",{href:"/chat"},r.a.createElement(i.a,{type:"message"}))," \xa0\xa0\xa0\xa0 ",r.a.createElement(Ie.a,{content:u,title:"Seller profile",trigger:"click"},r.a.createElement("a",null,"View Profile")))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement(s.a,{size:"large",shape:"round",type:"primary",onClick:function(){if(t.userData&&!t.userData.isAuth)return alert("Please Log in first");e.addToCart(e.detail._id)}},r.a.createElement(i.a,{type:"shopping-cart"}),"Add to Cart")))},Pe=a(606),Ne=a(607);var Fe=function(e){var t=Object(n.useState)(0),a=Object(f.a)(t,2),l=a[0],c=a[1],o=Object(n.useState)(0),u=Object(f.a)(o,2),s=u[0],m=u[1],d=Object(n.useState)(null),p=Object(f.a)(d,2),E=p[0],h=p[1],y=Object(n.useState)(null),g=Object(f.a)(y,2),v=g[0],k=g[1],j={};return j=e.video?{videoId:e.videoId,userId:e.userId}:{commentId:e.commentId,userId:e.userId},Object(n.useEffect)((function(){b.a.post("/api/like/getLikes",j).then((function(t){console.log("getLikes",t.data),t.data.success?(c(t.data.likes.length),t.data.likes.map((function(t){t.userId===e.userId&&h("liked")}))):alert("Failed to get likes")})),b.a.post("/api/like/getDislikes",j).then((function(t){console.log("getDislike",t.data),t.data.success?(m(t.data.dislikes.length),t.data.dislikes.map((function(t){t.userId===e.userId&&k("disliked")}))):alert("Failed to get dislikes")}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{key:"comment-basic-like"},r.a.createElement(A.a,{title:"Like"},r.a.createElement(i.a,{type:"like",theme:"liked"===E?"filled":"outlined",onClick:function(){null===E?b.a.post("/api/like/upLike",j).then((function(e){e.data.success?(c(l+1),h("liked"),null!==v&&(k(null),m(s-1))):alert("Failed to increase the like")})):b.a.post("/api/like/unLike",j).then((function(e){e.data.success?(c(l-1),h(null)):alert("Failed to decrease the like")}))}})),r.a.createElement("span",{style:{paddingLeft:"8px",cursor:"auto"}},l)),"\xa0\xa0\xa0\xa0",r.a.createElement("span",{key:"comment-basic-dislike"},r.a.createElement(A.a,{title:"Dislike"},r.a.createElement(i.a,{type:"dislike",theme:"disliked"===v?"filled":"outlined",onClick:function(){null!==v?b.a.post("/api/like/unDisLike",j).then((function(e){e.data.success?(m(s-1),k(null)):alert("Failed to decrease dislike")})):b.a.post("/api/like/upDisLike",j).then((function(e){e.data.success?(m(s+1),k("disliked"),null!==E&&(h(null),c(l-1))):alert("Failed to increase dislike")}))}})),r.a.createElement("span",{style:{paddingLeft:"8px",cursor:"auto"}},s)))};var Ae=function(e){var t=[r.a.createElement(Fe,{comment:!0,commentId:e.comment._id,userId:localStorage.getItem("userId")})];return r.a.createElement("div",null,r.a.createElement(Pe.a,{actions:t,author:e.comment.writer.fullname,avatar:r.a.createElement(Ne.a,{src:e.comment.writer.image,alt:"image"}),content:r.a.createElement("p",null,e.comment.content)}))},ze=O.a.TextArea,Me=k.a.Title;var Be=function(e){var t=Object(x.d)((function(e){return e.user})),a=Object(n.useState)(""),l=Object(f.a)(a,2),c=l[0],o=l[1],u=function(a){if(a.preventDefault(),t.userData&&!t.userData.isAuth)return alert("Please Log in first");var n={content:c,writer:t.userData._id,postId:e.postId};console.log(n),b.a.post("/api/comment/saveComment",n).then((function(t){t.data.success?(o(""),e.refreshFunction(t.data.result)):alert("Failed to save Comment")}))};return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement(Me,{level:3}," Share your opinions about ",e.productTitle," "),r.a.createElement("hr",null),console.log(e.CommentLists),e.CommentLists&&e.CommentLists.map((function(t,a){return!t.responseTo&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ae,{comment:t,postId:e.postId,refreshFunction:e.refreshFunction}))})),e.CommentLists&&0===e.CommentLists.length&&r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"200px"}},"Be the first one to share your thought about this textbook"),r.a.createElement("form",{style:{display:"flex"},onSubmit:u},r.a.createElement(ze,{style:{width:"100%",borderRadius:"5px"},onChange:function(e){o(e.currentTarget.value)},value:c,placeholder:"write some comments"}),r.a.createElement("br",null),r.a.createElement(s.a,{style:{width:"20%",height:"52px"},onClick:u},"Submit")))};var Le=function(e){var t=Object(x.c)(),a=e.match.params.productId,l=Object(n.useState)([]),c=Object(f.a)(l,2),o=c[0],u=c[1],i=Object(n.useState)([]),s=Object(f.a)(i,2),p=s[0],E=s[1],h={productId:a};return Object(n.useEffect)((function(){b.a.get("/api/product/products_by_id?id=".concat(a,"&type=single")).then((function(e){u(e.data[0])}))}),[]),Object(n.useEffect)((function(){b.a.post("/api/comment/getComments",h).then((function(e){console.log(e),e.data.success?(console.log("response.data.comments",e.data.comments),E(e.data.comments)):alert("Failed to get comments Info")}))}),[]),r.a.createElement("div",{className:"postPage",style:{width:"100%",padding:"3rem 4rem"}},r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement("h1",{style:{fontSize:35}},o.title)),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(m.a,{gutter:[16,16]},r.a.createElement(d.a,{lg:12,xs:24},r.a.createElement(_e,{detail:o})),r.a.createElement(d.a,{lg:12,xs:24},r.a.createElement(Te,{addToCart:function(e){var a;t((a=e,{type:"add_to_cart_user",payload:b.a.get("/api/users".concat("/addToCart?productId=",a)).then((function(e){return e.data}))}))},addToFavorite:function(e){var a;t((a=e,{type:"add_to_favorite_user",payload:b.a.get("/api/users".concat("/addToFavorite?productId=",a)).then((function(e){return e.data}))}))},detail:o})))),r.a.createElement("br",null),r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement(Fe,{video:!0,videoId:a,userId:localStorage.getItem("userId")})),r.a.createElement(Be,{productTitle:o.title,CommentLists:p,postId:a,refreshFunction:function(e){E(p.concat(e))}}))};var qe=function(e){var t=function(e){if(e.length>0){var t=e[0];return"http://localhost:5000/".concat(t)}};return r.a.createElement("div",null,r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Seller"),r.a.createElement("th",null,"Textbook Image"),r.a.createElement("th",null,"Textbook Title"),r.a.createElement("th",null,"Textbook Author"),r.a.createElement("th",null,"Textbook Quantity"),r.a.createElement("th",null,"Textbook Price"),r.a.createElement("th",null,"Remove from Cart"))),r.a.createElement("tbody",null,e.products&&e.products.map((function(a){return r.a.createElement("tr",{key:a._id},r.a.createElement("td",null,a.username,":",r.a.createElement("br",null)," ",r.a.createElement(i.a,{type:"mail"})," ",a.useremail," ,",r.a.createElement("br",null)," ",r.a.createElement(i.a,{type:"phone"})," ",a.userphone),r.a.createElement("td",null,r.a.createElement("img",{style:{width:"70px"},alt:"product",src:t(a.images)})),r.a.createElement("td",null,a.title," "),r.a.createElement("td",null,a.author," "),r.a.createElement("td",null,a.quantity," EA"),r.a.createElement("td",null,"$ ",a.price," "),r.a.createElement("td",null,r.a.createElement(s.a,{type:"danger",onClick:function(){return e.removeItem(a._id)}},r.a.createElement(i.a,{type:"delete"})," ")," "))})))))},Ue=a(615),We=a(96),He=a(143),$e=a(144),Ve=a(148),Re=a(145),Ge=a(150),Ye=a(289),Ke=a.n(Ye),Xe=function(e){function t(){return Object(He.a)(this,t),Object(Ve.a)(this,Object(Re.a)(t).apply(this,arguments))}return Object(Ge.a)(t,e),Object($e.a)(t,[{key:"render",value:function(){var e=this,t=this.props.toPay;return r.a.createElement(Ke.a,{env:"sandbox",client:{sandbox:"AQ0qhKSi01VWHdGNE3mOjxipP_NOr6yKS84cV-J6_SpOsoxtWEIkolqjY_ePlq40RDpKCONuYkElt8qc",production:"AQ0qhKSi01VWHdGNE3mOjxipP_NOr6yKS84cV-J6_SpOsoxtWEIkolqjY_ePlq40RDpKCONuYkElt8qc"},currency:"USD",total:t,onError:function(e){console.log("Error!",e)},onSuccess:function(t){console.log("The payment was succeeded!",t),e.props.onSuccess(t)},onCancel:function(e){console.log("The payment was cancelled!",e)},style:{size:"large",color:"blue",shape:"rect",label:"checkout"}})}}]),t}(r.a.Component);var Je=function(e){var t=Object(x.c)(),a=Object(n.useState)(0),l=Object(f.a)(a,2),c=l[0],o=l[1],u=Object(n.useState)(!1),i=Object(f.a)(u,2),m=i[0],d=i[1],p=Object(n.useState)(!1),E=Object(f.a)(p,2),h=E[0],y=E[1];Object(n.useEffect)((function(){var a=[];e.user.userData&&e.user.userData.cart&&e.user.userData.cart.length>0&&(e.user.userData.cart.forEach((function(e){a.push(e.id)})),t(function(e,t){return{type:"get_cart_items_user",payload:b.a.get("/api/product/products_by_id?id=".concat(e,"&type=array")).then((function(e){return t.forEach((function(t){e.data.forEach((function(a,n){t.id===a._id&&(e.data[n].quantity=t.quantity)}))})),e.data}))}}(a,e.user.userData.cart)))}),[e.user.userData]),Object(n.useEffect)((function(){e.user.cartDetail&&e.user.cartDetail.length>0&&g(e.user.cartDetail)}),[e.user.cartDetail]);var g=function(e){var t=0;e.map((function(e){t+=parseInt(e.price,10)*e.quantity})),o(t),d(!0)};return r.a.createElement("div",{style:{width:"85%",margin:"3rem auto"}},r.a.createElement("h1",null,"My Cart"),r.a.createElement("div",null,r.a.createElement(qe,{products:e.user.cartDetail,removeItem:function(e){var a;t((a=e,{type:"remove_cart_item_user",payload:b.a.get("/api/users/removeFromCart?_id=".concat(a)).then((function(e){return e.data.cart.forEach((function(t){e.data.cartDetail.forEach((function(a,n){t.id===a._id&&(e.data.cartDetail[n].quantity=t.quantity)}))})),e.data}))})).then((function(){b.a.get("/api/users/userCartInfo").then((function(e){e.data.success?e.data.cartDetail.length<=0?d(!1):g(e.data.cartDetail):alert("Failed to get cart info")}))}))}}),m?r.a.createElement("div",{style:{marginTop:"3rem"}},r.a.createElement("h2",null,"Total amount: $",c," ")):h?r.a.createElement(Ue.a,{status:"success",title:"Successfully Purchased Items"}):r.a.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"column",justifyContent:"center"}},r.a.createElement("br",null),r.a.createElement(We.a,{description:!1}),r.a.createElement("p",null,"No Items In the Cart"))),m&&r.a.createElement("div",null,r.a.createElement(Xe,{toPay:c,onSuccess:function(a){var n={cartDetail:e.user.cartDetail,paymentData:a};b.a.post("/api/users/successBuy",n).then((function(e){e.data.success?(y(!0),d(!1),t(function(e){return{type:"on_success_buy_user",payload:e}}({cart:e.data.cart,cartDetail:e.data.cartDetail}))):alert("Failed to buy it")})),b.a.get("/api/users/sendemail?recipient=".concat(e.user.userData.email,"&sender=noreply@TBooks.com&topic=Purchase Confirmation&text=Thank you for your trust with Textbook Exchange. Your purchase is successful, please keep this email as reference.")).then((function(e){console.log("confirmation sent!")}))},transactionError:function(){console.log("Paypal error")},transactionCanceled:function(){console.log("Transaction canceled")}}),r.a.createElement("p",null,"Or"),r.a.createElement("a",{href:"/chat"},r.a.createElement(s.a,{type:"dashed",size:"large"},"Contact seller for in person exchange"))))},Qe=O.a.TextArea,Ze=[{key:1,value:""},{key:2,value:"Male"},{key:3,value:"Female"},{key:4,value:"I don't want to provide"}];var et=function(){var e=Object(x.c)(),t=Object(n.useState)(""),a=Object(f.a)(t,2),l=a[0],c=a[1],u=Object(n.useState)(""),m=Object(f.a)(u,2),d=m[0],p=m[1],E=Object(n.useState)(""),h=Object(f.a)(E,2),y=h[0],g=h[1],v=Object(n.useState)(""),k=Object(f.a)(v,2),S=k[0],C=k[1],w=Object(n.useState)(1),_=Object(f.a)(w,2),D=_[0],I=_[1],T=Object(n.useState)(""),P=Object(f.a)(T,2),N=P[0],F=P[1],A=Object(n.useState)(""),z=Object(f.a)(A,2),M=z[0],B=z[1],L=Object(n.useState)(""),q=Object(f.a)(L,2),U=q[0],W=q[1],H=Object(n.useState)([]),$=Object(f.a)(H,2),V=$[0],R=$[1],G=Object(n.useState)([]),Y=Object(f.a)(G,2),K=Y[0],X=Y[1],J=Object(n.useState)(""),Q=Object(f.a)(J,2),Z=Q[0],ee=Q[1];Object(n.useEffect)((function(){b.a.get("/api/users/getHistory").then((function(e){e.data.success?R(e.data.history):alert("Failed to get purchase history")}))}),[]),Object(n.useEffect)((function(){b.a.get("/api/users/getPost").then((function(e){e.data.success?X(e.data.post):alert("Failed to get post history")}))}),[]),Object(n.useEffect)((function(){e({type:"fetch_profile",payload:b.a.get("/api/users".concat("/profile")).then((function(e){return e.data}))}).then((function(e){c(e.payload.email),p(e.payload.fullname),g(e.payload.birthday),C(e.payload.major),I(e.payload.sex),F(e.payload.phone),B(e.payload.description),W(e.payload.address),ee(e.payload.image)}))}),[]);var te=function(t){if(t.preventDefault(),!d)return alert("fullname is required");e(function(e){return{type:"update_profile",payload:b.a.put("/api/users".concat("/profile"),e).then((function(e){return e.data}))}}({fullname:d,birthday:y,sex:D,major:S,phone:N,address:U,description:M})).then((function(e){alert("profile successfully updated")}))},ae=function(e){if(e.length>0){var t=e[0];return"http://localhost:5000/".concat(t)}};return r.a.createElement("div",{style:{width:"80%",margin:"3rem auto "}},r.a.createElement("div",{style:{textAlign:"left"}},r.a.createElement("h1",null,r.a.createElement(Ne.a,{src:Z,alt:"image"}),"My Profile ",r.a.createElement(o.b,{className:"btn btn-light",to:"/settings"},r.a.createElement(i.a,{type:"setting",style:{color:"grey"}})))),r.a.createElement("br",null),r.a.createElement(j.a,{onSubmit:te},r.a.createElement("label",null,"Email"),r.a.createElement(O.a,{value:l,disabled:!0}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null,"Full Name"),r.a.createElement(O.a,{onChange:function(e){p(e.currentTarget.value)},value:d}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null,"Major"),r.a.createElement(O.a,{onChange:function(e){C(e.currentTarget.value)},value:S}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null,"Birthday"),r.a.createElement(O.a,{type:"date",onChange:function(e){g(e.currentTarget.value)},value:y}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null,"Sex"),r.a.createElement("br",null),r.a.createElement("select",{style:{width:200,height:30,borderRadius:5},onChange:function(e){I(e.currentTarget.value)},value:D},Ze.map((function(e){return r.a.createElement("option",{key:e.key,value:e.key},e.value)}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null,"Phone"),r.a.createElement(O.a,{onChange:function(e){F(e.currentTarget.value)},value:N}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null,"Address"),r.a.createElement(O.a,{onChange:function(e){W(e.currentTarget.value)},value:U}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null,"Description"),r.a.createElement(Qe,{onChange:function(e){B(e.currentTarget.value)},value:M}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(s.a,{type:"dashed",size:"large",onClick:te},"Update Profile")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{style:{textAlign:"left"}},r.a.createElement("h1",null,"My Purchase History ",r.a.createElement(i.a,{type:"shopping"}))),r.a.createElement("br",null),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Payment Id"),r.a.createElement("th",null,"Textbook Title"),r.a.createElement("th",null,"Textbook Price"),r.a.createElement("th",null,"Textbook Quantity"),r.a.createElement("th",null,"Date of Purchase"))),r.a.createElement("tbody",null,V.map((function(e){return r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,e.paymentId),r.a.createElement("td",null,e.name),r.a.createElement("td",null,"$ ",e.price),r.a.createElement("td",null,e.quantity),r.a.createElement("td",null,e.dateOfPurchase))})))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{style:{textAlign:"left"}},r.a.createElement("h1",null,"My Post History ",r.a.createElement(i.a,{type:"schedule"}))),r.a.createElement("br",null),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Textbook Image"),r.a.createElement("th",null,"Textbook Title"),r.a.createElement("th",null,"Textbook Author"),r.a.createElement("th",null,"Textbook Price"),r.a.createElement("th",null,"Date of Post"),r.a.createElement("th",null,"Edit Post"),r.a.createElement("th",null,"Delete Post"))),r.a.createElement("tbody",null,K.map((function(e){return r.a.createElement("tr",{key:e.title},r.a.createElement("td",null,r.a.createElement("img",{style:{width:"70px"},alt:"product",src:ae(e.images)})),r.a.createElement("td",null,e.title),r.a.createElement("td",null,e.author),r.a.createElement("td",null,"$ ",e.price),r.a.createElement("td",null,e.dateOfPost),r.a.createElement("td",null,r.a.createElement("a",{href:"/product/edit/".concat(e.id)},r.a.createElement(s.a,{type:"dashed"},r.a.createElement(i.a,{type:"edit"})))),r.a.createElement("td",null,r.a.createElement(s.a,{type:"danger",onClick:function(){var t;window.confirm("Are you sure you wish to delete this post?")&&(t=e.id,b.a.delete("/api/product/products_by_id?id=".concat(t)).then((function(e){e.data.success?alert(e.data.message):alert("delete post failed")})))}},r.a.createElement(i.a,{type:"delete"}))))})))))};var tt=function(){var e=Object(n.useState)(""),t=Object(f.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(""),o=Object(f.a)(c,2),u=o[0],m=o[1],d=Object(n.useState)(""),p=Object(f.a)(d,2),E=p[0],h=p[1],y=function(e){if(e.preventDefault(),u!=E)return alert("new password must match");!function(e){b.a.put("/api/users".concat("/resetpassword"),e)}({oldPassword:a,newPassword:u}),alert("password successfully changed")};return r.a.createElement("div",{style:{width:"80%",margin:"3rem auto "}},r.a.createElement("div",{style:{textAlign:"left"}},r.a.createElement("h1",null,"Change Password ",r.a.createElement(i.a,{type:"lock"}))),r.a.createElement(j.a,{onSubmit:y},r.a.createElement("label",null,"Old Password"),r.a.createElement(O.a,{onChange:function(e){l(e.currentTarget.value)},value:a}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null,"New Password"),r.a.createElement(O.a,{onChange:function(e){m(e.currentTarget.value)},value:u}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null,"Confirm New Password"),r.a.createElement(O.a,{onChange:function(e){h(e.currentTarget.value)},value:E}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(s.a,{type:"dashed",size:"large",onClick:y},"Change Password")))};var at=function(e){var t=function(e){if(e.length>0){var t=e[0];return"http://localhost:5000/".concat(t)}};return r.a.createElement("div",null,r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Textbook Image"),r.a.createElement("th",null,"Textbook Title"),r.a.createElement("th",null,"Textbook Author"),r.a.createElement("th",null,"Textbook Price"),r.a.createElement("th",null,"Remove from Favorite"))),r.a.createElement("tbody",null,e.products&&e.products.map((function(a){return r.a.createElement("tr",{key:a._id},r.a.createElement("td",null,r.a.createElement("img",{style:{width:"70px"},alt:"product",src:t(a.images)})),r.a.createElement("td",null,a.title," "),r.a.createElement("td",null,a.author," "),r.a.createElement("td",null,"$ ",a.price," "),r.a.createElement("td",null,r.a.createElement(s.a,{type:"danger",onClick:function(){return e.removeItem(a._id)}},r.a.createElement(i.a,{type:"delete"})," ")," "))})))))};var nt=function(e){var t=Object(x.c)();return Object(n.useEffect)((function(){var a=[];e.user.userData&&e.user.userData.favorite&&e.user.userData.favorite.length>0&&(e.user.userData.favorite.forEach((function(e){a.push(e.id)})),t(function(e){return{type:"get_favorite_items_user",payload:b.a.get("/api/product/products_by_id?id=".concat(e,"&type=array")).then((function(e){return e.data}))}}(a,e.user.userData.favorite)))}),[e.user.userData]),r.a.createElement("div",{style:{width:"85%",margin:"3rem auto"}},r.a.createElement("h1",null,"My Favorite"),r.a.createElement("div",null,r.a.createElement(at,{products:e.user.favoriteDetail,removeItem:function(e){var a;t((a=e,{type:"remove_favorite_item_user",payload:b.a.get("/api/users/removeFromFavorite?_id=".concat(a)).then((function(e){return e.data}))})).then((function(){b.a.get("/api/users/userFavoriteInfo").then((function(e){e.data.success?console.log(e.data.favorite):alert("Failed to get favorite info")}))}))}})))},rt=a(290),lt=a.n(rt);var ct=function(e){return r.a.createElement("div",{style:{width:"100%"}},r.a.createElement(Pe.a,{author:e.sender.fullname,avatar:r.a.createElement(Ne.a,{src:e.sender.image,alt:e.sender.fullname}),content:r.a.createElement("p",null,e.message),datetime:r.a.createElement(A.a,{title:_()().format("YYYY-MM-DD HH:mm:ss")},r.a.createElement("span",null,_()().fromNow()))}))},ot=function(e){function t(){var e,a;Object(He.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(a=Object(Ve.a)(this,(e=Object(Re.a)(t)).call.apply(e,[this].concat(l)))).state={chatMessage:""},a.hanleSearchChange=function(e){a.setState({chatMessage:e.target.value})},a.renderCards=function(){return a.props.chats.chats&&a.props.chats.chats.map((function(e){return r.a.createElement(ct,Object.assign({key:e._id},e))}))},a.submitChatMessage=function(e){if(e.preventDefault(),a.props.user.userData&&!a.props.user.userData.isAuth)return alert("Please Log in first");var t=a.state.chatMessage,n=a.props.user.userData._id,r=a.props.user.userData.fullname,l=a.props.user.userData.image,c=_()();a.socket.emit("Input Chat Message",{chatMessage:t,userId:n,userName:r,userImage:l,nowTime:c,type:"Text"}),a.setState({chatMessage:""})},a}return Object(Ge.a)(t,e),Object($e.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.dispatch({type:"get_chat",payload:b.a.get("/api/chat".concat("/getChats")).then((function(e){return e.data}))}),this.socket=lt()("http://localhost:5000"),this.socket.on("Output Chat Message",(function(t){console.log(t),e.props.dispatch({type:"after_post_message",payload:t})}))}},{key:"componentDidUpdate",value:function(){this.messagesEnd.scrollIntoView({behavior:"smooth"})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("p",{style:{fontSize:"2rem",textAlign:"center"}}," Chat with Seller")),r.a.createElement("div",{style:{maxWidth:"800px",margin:"0 auto"}},r.a.createElement("div",{className:"infinite-container",style:{height:"500px",overflowY:"scroll"}},this.props.chats&&this.renderCards(),r.a.createElement("div",{ref:function(t){e.messagesEnd=t},style:{float:"left",clear:"both"}})),r.a.createElement(m.a,null,r.a.createElement(j.a,{layout:"inline",onSubmit:this.submitChatMessage},r.a.createElement(d.a,{span:18},r.a.createElement(O.a,{id:"message",prefix:r.a.createElement(i.a,{type:"message",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Type your message",type:"text",value:this.state.chatMessage,onChange:this.hanleSearchChange})),r.a.createElement(d.a,{span:4},r.a.createElement(s.a,{type:"secondary",size:"medium",onClick:this.submitChatMessage,htmlType:"submit"},r.a.createElement(i.a,{type:"enter"})))))))}}]),t}(n.Component),ut=Object(x.b)((function(e){return{user:e.user,chats:e.chat}}))(ot),it=function(){return r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"Loading...")},r.a.createElement(B,null),r.a.createElement("div",{style:{paddingTop:"75px",minHeight:"calc(100vh - 80px)"}},r.a.createElement(u.d,null,r.a.createElement(u.b,{exact:!0,path:"/Home",component:W(p,null)}),r.a.createElement(u.b,{exact:!0,path:"/"},r.a.createElement(u.a,{to:"/Home"})),r.a.createElement(u.b,{exact:!0,path:"/login",component:W(C,!1)}),r.a.createElement(u.b,{exact:!0,path:"/register",component:W(P,!1)}),r.a.createElement(u.b,{exact:!0,path:"/chat",component:W(ut,null)}),r.a.createElement(u.b,{exact:!0,path:"/textbook",component:W(ie,null)}),r.a.createElement(u.b,{exact:!0,path:"/product/upload",component:W(ye,!0)}),r.a.createElement(u.b,{exact:!0,path:"/product/edit/:productId",component:W(Se,!0)}),r.a.createElement(u.b,{exact:!0,path:"/product/:productId",component:W(Le,null)}),r.a.createElement(u.b,{exact:!0,path:"/user/cart",component:W(Je,!0)}),r.a.createElement(u.b,{exact:!0,path:"/profile",component:W(et,!0)}),r.a.createElement(u.b,{exact:!0,path:"/settings",component:W(tt,!0)}),r.a.createElement(u.b,{exact:!0,path:"/favorite",component:W(nt,null)}),r.a.createElement(u.b,{component:E}))),r.a.createElement(H,null))},st=a(78),mt=Object(st.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"register_user":return Object($.a)({},e,{register:t.payload});case"login_user":return Object($.a)({},e,{loginSucces:t.payload});case"auth_user":return Object($.a)({},e,{userData:t.payload});case"logout_user":return Object($.a)({},e);case"fetch_profile":case"update_profile":return Object($.a)({},e,{user:t.payload});case"add_to_cart_user":return Object($.a)({},e,{userData:Object($.a)({},e.userData,{cart:t.payload})});case"get_cart_items_user":return Object($.a)({},e,{cartDetail:t.payload});case"remove_cart_item_user":return Object($.a)({},e,{cartDetail:t.payload.cartDetail,userData:Object($.a)({},e.userData,{cart:t.payload.cart})});case"add_to_favorite_user":return Object($.a)({},e,{userData:Object($.a)({},e.userData,{favorite:t.payload})});case"get_favorite_items_user":return Object($.a)({},e,{favoriteDetail:t.payload});case"remove_favorite_item_user":return Object($.a)({},e,{favoriteDetail:t.payload.favoriteDetail,userData:Object($.a)({},e.userData,{favorite:t.payload.favorite})});case"on_success_buy_user":return Object($.a)({},e,{userData:Object($.a)({},e.userData,{cart:t.payload.cart}),cartDetail:t.payload.cartDetail});default:return e}},chat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"get_chat":return Object($.a)({},e,{chats:t.payload});case"after_post_message":return Object($.a)({},e,{chats:e.chats.concat(t.payload)});default:return e}}}),dt=a(291),pt=a.n(dt),Et=a(292),ft=Object(st.a)(pt.a,Et.a)(st.d);c.a.render(r.a.createElement(x.a,{store:ft(mt,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())},r.a.createElement(o.a,null,r.a.createElement(it,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[296,1,2]]]);
//# sourceMappingURL=main.3592ecf2.chunk.js.map